machine:
  java:
    version: openjdk8
  environment:
    TERM: dumb

dependencies:
  pre:
    - ./grailsw refresh-dependencies
  cache_directories:
    - "~/.grails"

test:
  pre:
    - mkdir -p $CIRCLE_TEST_REPORTS/phantomjs $CIRCLE_TEST_REPORTS/chrome $CIRCLE_TEST_REPORTS/firefox
  override:
    - ./grailsw -Dgeb.env=chrome -Dgrails.project.test.reports.dir=$CIRCLE_TEST_REPORTS/chrome test-app
    - ./grailsw -Dgeb.env=firefox -Dgrails.project.test.reports.dir=$CIRCLE_TEST_REPORTS/firefox test-app
    - ./grailsw -Dgeb.env=phantomjs -Dgrails.project.test.reports.dir=$CIRCLE_TEST_REPORTS/phantomjs test-app

